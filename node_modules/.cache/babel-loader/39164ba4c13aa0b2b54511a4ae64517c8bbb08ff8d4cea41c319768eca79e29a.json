{"ast":null,"code":"var _jsxFileName = \"/home/jtimm/projects/courses/401/resty/src/app.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport './app.scss';\nimport Header from './components/header';\nimport Footer from './components/footer';\nimport Form from './components/form';\nimport Results from './components/results';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  data: null,\n  request: {},\n  loading: false,\n  history: []\n};\nconst reducer = (state = initialState, action) => {\n  const {\n    type,\n    payload\n  } = action;\n  switch (type) {\n    case 'START_REQUEST':\n      return {\n        ...state,\n        request: payload,\n        loading: true\n      };\n    case 'FINISH_REQUEST':\n      return {\n        ...state,\n        loading: false,\n        data: payload,\n        history: [...state.history, {\n          request: state.request,\n          data: payload\n        }]\n      };\n    case 'SHOW_HISTORY':\n      return {\n        ...state,\n        loading: 'history',\n        data: payload.data,\n        request: payload.request\n      };\n    default:\n      return state;\n  }\n};\nfunction App() {\n  _s();\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const callApi = async requestParams => {\n    const action = {\n      type: 'START_REQUEST',\n      payload: requestParams\n    };\n    dispatch(action);\n  };\n  const showHistoryData = entry => {\n    const action = {\n      type: 'SHOW_HISTORY',\n      payload: entry\n    };\n    dispatch(action);\n  };\n  useEffect(async () => {\n    if (state.loading === true && state.request.method && state.request.url) {\n      const response = await axios({\n        method: state.request.method,\n        url: state.request.url\n      });\n      const action = {\n        type: 'FINISH_REQUEST',\n        payload: response.data\n      };\n      dispatch(action);\n    }\n  }, [state.request]);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Request Method: \", request.method]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"URL: \", request.url]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      handleApiCall: callApi\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Results, {\n      data: data,\n      loading: loading,\n      history: history\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","Header","Footer","Form","Results","jsxDEV","_jsxDEV","initialState","data","request","loading","history","reducer","state","action","type","payload","App","_s","dispatch","useReducer","callApi","requestParams","showHistoryData","entry","useEffect","method","url","response","axios","Fragment","children","fileName","_jsxFileName","lineNumber","columnNumber","handleApiCall","_c","$RefreshReg$"],"sources":["/home/jtimm/projects/courses/401/resty/src/app.js"],"sourcesContent":["import React, { useState } from 'react';\n\nimport './app.scss';\n\nimport Header from './components/header';\nimport Footer from './components/footer';\nimport Form from './components/form';\nimport Results from './components/results';\n\nconst initialState = {\n  data: null,\n  request: {},\n  loading: false,\n  history: [],\n};\n\nconst reducer = (state=initialState, action) => {\n\n  const {type, payload} = action;\n\n  switch(type) {\n  case 'START_REQUEST':\n    return { ...state, request: payload, loading: true };\n  case 'FINISH_REQUEST':\n    return {\n      ...state,\n      loading: false,\n      data: payload,\n      history: [...state.history, { request: state.request, data: payload } ],\n    };\n  case 'SHOW_HISTORY':\n    return {\n      ...state,\n      loading: 'history',\n      data: payload.data,\n      request: payload.request,\n    };\n  default:\n    return state;\n  }\n\n};\n\nfunction App() {\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const callApi = async (requestParams) => {\n\n    const action = {\n      type: 'START_REQUEST',\n      payload: requestParams,\n    };\n\n    dispatch(action);\n\n  };\n\n  const showHistoryData = (entry) => {\n\n    const action = {\n      type: 'SHOW_HISTORY',\n      payload: entry,\n    };\n\n    dispatch(action);\n\n  };\n\n  useEffect( async () => {\n\n    if( state.loading === true && state.request.method && state.request.url ) {\n\n      const response = await axios({\n        method: state.request.method,\n        url: state.request.url,\n      });\n\n      const action = {\n        type: 'FINISH_REQUEST',\n        payload: response.data,\n      };\n\n      dispatch(action);\n\n    }\n\n  }, [state.request]);\n\n  return (\n    <React.Fragment>\n      <Header />\n      <div>Request Method: {request.method}</div>\n      <div>URL: {request.url}</div>\n\n      {/* Pass callApi to Form */}\n      <Form handleApiCall={callApi} />\n\n      {/* Pass history and loading state to Results */}\n      <Results data={data} loading={loading} history={history} />\n\n      <Footer />\n    </React.Fragment>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}